var players = [{
    "id": 202329,
    "name": "Aminu",
    "draft": "8th pick, 2010 (LA Clippers)",
    "qa": "Q: If you didn’t have to sleep, what would you do with the extra time? A: Make music. Q: What skill would you like to master? A: Wing Chun (type of martial arts). Q: What’s the best way to start the day? A: Meditation. Q: What’s your favorite animal? A: Elephant. Q: Can you play any instruments? A: I used to play both tuba and baritone. Q: Who would you like to be for a day? A: Barack Obama. Q: What is the #1 thing on your bucket list? A: Go to India. Q: Who inspires you to be better? A: My family.",
    "seasonsPlayed": [2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017],
    "highlights": ["Shot a career-high 36.9% on 3-pointers during the 2017-18 season", "Led Portland with 1.14 steals per game in 2017-18", "Scored a career-best 10.2 points per game in his first season with Portland in 2015-16", "Averaged 13.9 points and 8.0 rebounds per game in 24 career postseason appearances"],
    "timeline": ["LAC 2010-11", "NOP 2011-14", "DAL 2014-15", "POR 2015-18"],
    "twitter": "farouq1",
    "instagram": "chiefhasarrived",
  },
  {
    "id": 1627735,
    "name": "Baldwin",
    "draft": "17th pick, 2016 (Memphis)",
    "seasonsPlayed": [2016, 2017],
    "highlights": ["Scored in double figures twice in seven games and made 14 of his 21 shots with Portland in 2017-18", "Named to the All-Freshman Team in 2015 and the All-SEC Second Team in 2016 while at Vanderbilt", "Vanderbilt's all-time leader for assists as a freshman (155) and sophomore (172)"],
    "timeline": ["MEM 2016-17", "POR 2017-18"],
    "twitter": "The_Fourth_Wade",
    "instagram": "_wadeiv",

  },
  {
    "id": 1628380,
    "name": "Collins",
    "draft": "10th pick, 2017 (Sacramento)",
    "qa": "Q: What’s your favorite piece of clothing you own? A: Most proud of my McDonald’s All-American Letterman Jacket. Q: What job would you be terrible at? A: Accountant or anything with numbers. Q: What skill would you like to master? A: Yoga. Q: What do you wish you knew more about? A: Politics. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Driving stick shift. Q: Who would you like to be for a day? A: Damian Lillard. Q: What two words best describe you? A: Fun and Chill. Q: Who inspires you to be better? A: Myself. Q: What’s the best way to start the day? A: Good breakfast.",
    "seasonsPlayed": [2017],
    "highlights": ["Ranked 13th among NBA rookies in blocks (31), 18th in rebounds (221) and 23rd in 3-pointers (35) as a rookie in 2017-18", "Averaged 10.0 points in 39 games as a freshman in helping Gonzaga reach the 2017 NCAA Championship Game", "Led the West Coast Conference as a freshman in 2016-17 in field goal shooting and blocked shots"],
    "timeline": ["POR 2017-18"],
    "twitter": "zcollins_33",
    "instagram": "zachcollins_33",
  },
  {
    "id": 1626192,
    "name": "Connaughton",
    "draft": "41st pick, 2015 (Brooklyn)",
    "qa": "  Q: If you didn’t have to sleep, what would you do with the extra time? A: Learn more about business and entrepreneurial endeavors. Q: What job would you be terrible at? A: Biochemist. Q: Who would you like to be for a day? A: Tom Brady. Q: What skill would you like to master? A: Dancing like Chris Brown. Q: What do you wish you knew more about? A: Anatomy. Q: How do you relax after a long day of work? A: Hang out on the couch and watch Modern Family. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Hot yoga. Q: What’s the strangest talent you have? Talking myself out of bad situations. Q: What two words best describe you? A: Genuine and Positive.",
    "seasonsPlayed": [2015, 2016, 2017],
    "highlights": ["Recorded career highs in points per game (5.4) and 3-pointers (74) in 2017-18", "The only Trail Blazer to appear in all 82 games during the 2017-18 season", "Tallied a career-high 24 points on Opening Night at Phoenix on Oct. 18, 2017"],
    "timeline": ["POR 2015-18"],
    "twitter": "PlanetPat5",
    "instagram": "planetpat5",
  },
  {
    "id": 202334,
    "name": "Davis",
    "draft": "13th pick, 2010 (Toronto)",
    "qa": "  Q: What’s your favorite piece of clothing you own? A: My leather jacket. Q: What is the weirdest thing you’ve ever eaten? A: Frog Legs. Q: What skill would you like to master? A: Card Tricks. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Skydiving. Q: What’s the best way to start the day? A: The Portland Way. Q: Who would you like to be for a day? A: Brain Surgeon. Q: What two words best describe you? A: Authentic and Respectful. Q: What is the #1 thing on your bucket list? A: Travel.",
    "seasonsPlayed": [2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017],
    "highlights": ["Led all NBA players off the bench in 2017-18 with 575 rebounds and ranked ninth with 52 blocks", "His 599 rebounds in 2015-16 were the most by a Trail Blazer off the bench in team history", "Shot better than 50% from the field in each of his eight seasons in the NBA (58.2% in 2017-18)"],
    "timeline": ["TOR 2010-13", "MEM 2012-14", "LAL 2014-15", "POR 2015-18"],
    "twitter": "eddavisXVII",
    "instagram": "eddavisXVII",

  },
  {
    "id": 203090,
    "name": "Harkless",
    "draft": "15th pick, 2012",
    "qa": "Q: What’s your favorite piece of clothing you own? A: My Mickey Mouse sweater. Q: What job would you be terrible at? A: Anything behind a desk. Q: What is the weirdest thing you’ve ever eaten? A: Gator bites. Q: What skill would you like to master? A: Putting. Q:What two words best describe you? A: Laid back. Q: Are you usually early or late? A: Right on time. Q:If you didn’t have to sleep, what would you do with the extra time? A: Play video games. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Skydiving.",
    "seasonsPlayed": [2012, 2013, 2014, 2015, 2016, 2017],
    "highlights": ["His 41.5% 3-point shooting percentage in 2017-18 marked a new career high", "Averaged a career-best 10.0 points on 50.2% shooting during the 2016-17 season", "Scored in double figures in a career-high 40 games in 2016-17"],
    "timeline": ["ORL 2012-15", "POR 2015-18"],
    "twitter": "moe_harkless",
    "instagram": "moe_harkless",
  },
  {
    "id": 1627774,
    "name": "Layman",
    "draft": "47th pick, 2016 (Orlando)",
    "qa": "Q: If you didn’t have to sleep, what would you do with the extra time? A: Play more basketball. Q: What job would you be terrible at? A: Chef. Q: What is the weirdest thing you’ve ever eaten? A: Canned beets. Q: What do you wish you knew more about? A: City of Portland. Q: How do you relax after a long day of work? A: Take my dogs for a walk. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Going to Oregon Coast – Cannon Beach. Q: Who would you like to be for a day? A: Beyonce. Q: What two words best describe you? A: Caring and Calm. Q: What is the #1 thing on your bucket list? A: Europe Trip.",
    "seasonsPlayed": [2016, 2017],
    "highlights": ["His career-high 17 points vs. Golden State on Nov. 1, 2016 were the most by a Trail Blazer in his NBA debut since Damian Lillard", "One of two NBA players to make five 3-pointers in his first career game (Donyell Marshall)", "Ranks second in games played (140) at the University of Maryland"],
    "timeline": ["POR 2016-18"],
    "twitter": "JLayman10",
    "instagram": "j_lay_lay",
  },
  {
    "id": 203086,
    "name": "Leonard",
    "draft": "11th pick, 2012 (Portland)",
    "qa": "Q: What’s your favorite piece of clothing you own? A: Perfectly tailored suit. A: What is the weirdest thing you’ve ever eaten? A: Black squid Spanish rice. Q: What skill would you like to master? A: Piano. Q: What do you wish you knew more about? A: Speaking other languages. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Playing guitar. Q: What’s the best way to start the day? A: Kiss from my wife. Q: Who inspires you to be better? A: Navy Seals. Q: What’s your favorite animal? A: Kangaroo. Q: What two words best describe you? A: Love and Loyalty.",
    "seasonsPlayed": [2012, 2013, 2014, 2015, 2016, 2017],
    "highlights": ["Shot a career-best 59.0% from the field in 2017-18", "Averaged career highs of 8.4 points and 5.1 rebounds during the 2015-16 season", "Scored in double figures a career-high 25 times in 2015-16, including five straight games"],
    "timeline": ["POR 2012-18"],
    "twitter": "MeyersLeonard11",
    "instagram": "Meyersleonard11",
  },
  {
    "id": 203081,
    "name": "Lillard",
    "draft": "6th pick, 2012 (Portland)",
    "qa": "Q: What skill would you like to master? A: Boxing. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Wakeboarding. Q: Who inspires you to be better? A: My nephews. Q: What’s the strangest talent you have? A: Guessing. Q: What’s your favorite animal? A: Lion. Q: Who would you like to be for a day? A: The President. Q: Can you play any instruments? A: Yes, piano. Q: What is the #1 thing on your bucket list? A: Be nominated for a Grammy.",
    "seasonsPlayed": [2012, 2013, 2014, 2015, 2016, 2017],
    "highlights": ["Earned NBA All-Star honors for the third time in 2017-18", "Twice named to the All-NBA Team (2nd Team in 2015-16, 3rd Team in 2013-14)", "Portland’s franchise leader in 3-pointers (1,269) and ranks fourth in points (10,842)", "Third player in NBA history with 1,500 points and 400 assists in each of first six seasons (LeBron James, Oscar Robertson)", "Holds team record for points in a game (59 vs. Utah, 4/8/17)", "Unanimously named 2012-13 NBA Rookie of the Year"],
    "timeline": ["POR 2012-18"],
    "twitter": "Dame_Lillard",
    "instagram": "damianlillard",
  },
  {
    "id": 203468,
    "name": "McCollum",
    "draft": "10th pick, 2013 (Portland)",
    "qa": "Q: What’s your favorite piece of clothing you own? A: Socks/Drawers. Q: What skill would you like to master? A: Cooking. Q: How do you relax after a long day of work? A: Massage, my couch or Cryotherapy. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Go to Bora Bora. Q: What’s the best way to start the day? A: Meditation and brushing my teeth. Q: What’s the strangest talent you have? A: Alchemy. Q: Can you play any instruments? A: Drums. Q: What two words best describe you? A: Rare and Infectious. Q: What is the #1 thing on your bucket list? A: Skydiving in Dubai.",
    "seasonsPlayed": [2013, 2014, 2015, 2016, 2017],
    "highlights": ["Averaged more than 20 points in each of the past three years", "Finished 7th in the NBA in field goals in each of the last three seasons", "Led the NBA in free throw shooting (91.2%) in 2016-17", "Named the 2015-16 NBA Most Improved Player", "Ranked 9th in the NBA in 3-pointers (197) in 2016-17", "Currently 6th on the team’s all-time list for 3-pointers made (656)"],
    "timeline": ["POR 2013-18"],
    "twitter": "CJMcCollum",
    "instagram": "3jmccollum",
  },
  {
    "id": 203894,
    "name": "Shabazz",
    "draft": "24th pick, 2014 (Charlotte)",
    "qa": "Q: If you didn’t have to sleep, what would you do with the extra time? A: I love to sleep too much, I would never give up sleeping. Q: What job would you be terrible at? A: Photography. Q: What skill would you like to master? A: Cooking. Q: What do you wish you knew more about? A: Financing. Q: What’s the strangest talent you have? A: Spidey Senses. Q: Who would you like to be for a day? A: An animal. Q: What two words best describe you? A: Competitive and Driven. Q: What is the #1 thing on your bucket list? A: Go on vacation.",
    "seasonsPlayed": [2014, 2015, 2016, 2017],
    "highlights": ["Notched career highs in scoring (8.7) and 3-point shooting (37.6%) in 2017-18", "Ranked second on the team in steals per game (1.09) during the 2017-18 season", "An NCAA AP All-American in 2013-14 and two-time NCAA Champion (2011, 2014) at Connecticut"],
    "timeline": ["MIA 2014-15", "ORL 2015-16", "POR 2016-18"],
    "twitter": "ShabazzNapier",
    "instagram": "shabazznap13r",
  },
  {
    "id": 203994,
    "name": "Nurkic",
    "draft": "16th pick, 2014 (Chicago)",
    "qa": "Q: What skill would you like to master? A: Flying a plane. Q: What do you wish you knew more about? A: Myself. Q: How do you relax after a long day of work? A: Watching movies, hanging out with friends. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Skydiving. Q: What’s the best way to start the day? A: Coffee. Q: What’s your favorite animal? A: Bull. Q: Who would you like to be for a day? A: Captain Jack Sparrow. Q:What two words best describe you? A: Bosnian Beast.",
    "seasonsPlayed": [2014, 2015, 2016, 2017],
    "highlights": ["Led the team in rebounds (9.0, 14th in NBA), blocks (1.41, 10th in NBA) and double-doubles (27, 23rd in NBA) in 2017-18", "Averaged a double-double (15.2 points, 10.4 rebounds) in 20 games with Portland in 2016-17", "The first Trail Blazer to average 15+ points and 10+ rebounds in his first 20 games in Portland since Mychal Thompson in 1978", "The only Trail Blazer to total 30+ points on 80% FG and 15+ rebounds in a game (3/28/17 vs. Denver)"],
    "timeline": ["DEN 2014-17", "POR 2016-18"],
    "twitter": "bosnianbeast27",
    "instagram": "bosnianbeast27",
  },
  {
    "id": 1627834,
    "name": "Papagiannis",
    "draft": "13th pick, 2016 (Phoenix)",
    "seasonsPlayed": [2016, 2017],
    "highlights": ["A 51.4% career field goal shooter in 39 games played", "Played one-plus seasons with the Kings before signing with the Trail Blazers during the 2017-18 season", "The highest drafted Greek player in NBA Draft history, his rights were traded to Sacramento on draft night"],
    "timeline": ["SAC 2016-17", "SAC 2017-18", "POR 2017-18"],
    "twitter": "N/A",
    "instagram": "N/A",
  },
  {
    "id": 1628403,
    "name": "Swanigan",
    "draft": "26th pick, 2017 (Portland)",
    "qa": "Q: What job would you be terrible at? A: Accountant/anything with paperwork. Q: What skill would you like to master? A: Piano. Q: What do you wish you knew more about? A: How the government uses money.  Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Voodoo Donuts. Q: What’s the strangest talent you have? A: I can manage my dreams while I’m dreaming. Q: What’s your favorite animal? A: Snow Leopard. Q: Who would you like to be for a day? A: Kanye West. Q: What two words best describe you? A: Laid Back. Q: What is the #1 thing on your bucket list? A: NBA Championship.",
    "seasonsPlayed": [2017],
    "highlights": ["Tallied eight points, four rebounds and three assists in his NBA debut at Phoenix on Oct. 18, 2017", "Named a 2016-17 NCAA AP All-American and Big Ten Player of the Year in his second and final season at Purdue", "Ranked second among all NCAA players in 2016-17 with 12.5 rebounds per game"],
    "timeline": ["POR 2017-18"],
    "twitter": "calebswanigan50",
    "instagram": "calebswanigan50",
  },
  {
    "id": 202323,
    "name": "Turner",
    "draft": "2nd pick, 2010 (Philadelphia)",
    "qa": "Q: If you didn’t have to sleep, what would you do with the extra time? A: Get my college degree. Q: What’s your favorite piece of clothing you own? A: Beatles bathrobe. Q: What job would you be terrible at? A: Any job with math. Q: What skill would you like to master? A: Playing guitar. Q: What do you wish you knew more about? A: Current Events. Q: What’s the strangest talent you have? A: Roll my belly and quoting movies. Q: Who would you like to be for a day? A: Chance the Rapper. Q: What two words best describe you? A: Random and Passionate.",
    "seasonsPlayed": [2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017],
    "highlights": ["A career double-digit scorer, averaging 10.2 points over eight seasons", "Shot 85.0% from the foul line (career high) and 31.8% from the 3-point line (best since 2013-14) during the 2017-18 season", "Helped his team to the postseason in five straight years and seven of his eight career seasons"],
    "timeline": ["PHI 2010-11 – 2013-14", "IND 2013-14", "BOS 2014-16", "POR 2016-18"],
    "twitter": "thekidet",
    "instagram": "evanturner",
  },
  {
    "id": 203912,
    "name": "Wilcox",
    "draft": "28th pick, 2014 (L.A. Clippers)",
    "qa": "Q: What’s your favorite piece of clothing you own? A: Tom Ford suit. Q: What skill would you like to master? A: Reading minds. Q: What do you wish you knew more about? A: Politics. Q: What is something you’ve been meaning to try but just haven’t gotten around to it? A: Check out the Columbia Gorge. Q: Can you play any instruments? A: Guitar. Q: What two words best describe you? A: Hard Worker. Q: What’s the best way to start the day? A: Good breakfast. Q: Who inspires you to be better? A: My family.",
    "seasonsPlayed": [2014, 2015, 2016, 2017],
    "highlights": ["Played two seasons for the Clippers and one with the Magic before joining the Trail Blazers for the 2017-18 season", "Finished his career at Washington as the program’s all-time leader in 3-pointers and second in scoring", "One of three players in Pac-12 history with at least 1,700 points", "275 3-pointers and 400 rebounds in their career"],
    "timeline": ["LAC 2014-16", "ORL 2016-17", "POR 2017-18"],
    "twitter": "UCjwilcox23W",
    "instagram": "cjwilcox23"
  }
]

// Parse the URL parameter
function getParameterByName(name, url) {
  if (!url) url = window.location.href;
  name = name.replace(/[\[\]]/g, "\\$&");
  var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
    results = regex.exec(url);
  if (!results) return null;
  if (!results[2]) return '';
  return decodeURIComponent(results[2].replace(/\+/g, " "));
}
// Give the parameter a variable name
var dynamicContent = getParameterByName('pid');

$(document).ready(function() {

  var optionValue = '';

  if (dynamicContent == '202329') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '1627735') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '1628380') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '1626192') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '202334') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '203090') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '1627774') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '203086') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '203081') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '203468') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '203894') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '203994') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '1628403') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '202323') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '203912') {
    optionValue = dynamicContent;
  } else if (dynamicContent == '1627834') {
    optionValue = dynamicContent;
  } else {
    var pathArray = window.location.pathname.split('/blazers/bios?pid=');
    optionValue = pathArray[1];
  }

  loadData(optionValue, players);


  function populateStats(object) {
    $("#info").css('background', "#f0f0f0");
    $("#name-container").css('border-top', '1px solid #f0f0f0')
    $("#name-container").css('border-right', '1px solid #f0f0f0')
    jQuery("#total-stats tr.remove-div").remove();

    jQuery.getJSON('https://data.nba.com/data/v2015/json/mobile_teams/nba/2017/players/playercard_' + object.id + '_02.json').done(function(data) {
      if ($('#stats-select').val() === "total") {
        for (i in data.pl.ct.st) {
          var yearData = data.pl.ct.st[i];

          jQuery("#total-stats").append('<tr class="remove-div"><td>' + yearData.val + '</td><td>' + yearData.ta + '</td><td>' + yearData.gp + '</td><td>' + yearData.min + '</td><td>' + yearData.pts + '</td><td>' + yearData.fgm + '</td><td>' + yearData.tpm + '</td><td>' + yearData.ftm + '</td><td>' + yearData.reb + '</td><td>' + yearData.ast + '</td><td>' + yearData.stl + '</td><td>' + yearData.blk + '</td></tr>');
          sortTable($("#regular-season-total"), 'asc');
        }

        // });
      } else {
        for (i in data.pl.ca.sa) {
          var yearData = data.pl.ca.sa[i];
          // jQuery.getJSON('https://data.nba.com/data/v2015/json/mobile_teams/nba/' + seasonYear + '/players/playercard_' + object.id + '_02.json').done(function(data) {
          jQuery("#total-stats").append('<tr class="remove-div"><td>' + yearData.val + '</td><td>' + yearData.ta + '</td><td>' + yearData.gp + '</td><td>' + yearData.min + '</td><td>' + yearData.pts + '</td><td>' + Math.round(yearData.fgp * 100) + '%' + '</td><td>' + Math.round(yearData.tpp * 100) + '%' + '</td><td>' + Math.round(yearData.ftp * 100) + '%' + '</td><td>' + yearData.reb + '</td><td>' + yearData.ast + '</td><td>' + yearData.stl + '</td><td>' + yearData.blk + '</td></tr>');
          sortTable($("#regular-season-total"), 'asc');
        }

      }
    });
  }

  function sortTable(table, order) {
    var asc = order === 'asc',
      tbody = table.find('tbody');

    tbody.find('tr').sort(function(a, b) {
      if (asc) {
        return $('td:first', a).text().localeCompare($('td:first', b).text());
      } else {
        return $('td:first', b).text().localeCompare($('td:first', a).text());
      }
    }).appendTo(tbody);
  }

  function playerHeadShot(optionValue) {
    var url = 'https://ak-static.cms.nba.com/wp-content/uploads/headshots/nba/latest/260x190/' + optionValue + '.png';

    if (optionValue == 1627735) {
      jQuery("img.headshot").attr('src', 'https://publish.nba.com/blazers/sites/blazers/files/baldwin.png');
    } else if (optionValue == 203912) {
      jQuery("img.headshot").attr('src', 'https://mediacentral.nba.com/wp-content/uploads/headshots/nba/por/2017-18/players/203912.png');
    } else {
      jQuery("img.headshot").attr('src', url);
    }
  }

  function filterPlayers(optionValue, players) {

    var object = players.filter(function(d) { return d.id === +optionValue; })[0];
    return object;

  }

  function renderVideo(video, index, clickedIndex) {

    var formatTime = video.published.split("T");
    var splitTime = formatTime[0].split("-");
    var dateTime = splitTime[1] + "/" + splitTime[2];

    if (index === clickedIndex) {
      $("#video-wrapper").empty();
      jQuery("#video-title").append('<h2><span style="color:#c8102e">' + dateTime + '</span>' + ' ' + video.title + ' ' + '</h2>')
      jQuery("#video-playing").append('<div id="blazers-video-player" data-team="blazers" data-videoid="/video/' + video.videoId + '" data-cvp-autostart="FALSE"></div>');

      jQuery(".video-grid").append('<div class="grid-item" style="position:relative;"><h3 class="vid-title remove-div"><span style="color:#c8102e">' + dateTime + '</span>' + ' ' + video.title + ' ' + '</h3><a class="remove-div grid-click" data-videoid="/video/' + video.videoId + '"><div class="video-thumb" style="background-image:url(' + video.listImage.source + ')" ><img src="https://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/blazers/images/play-logo.png" class="play-logo" ></div></a></div>');
    } else {
      jQuery(".video-grid").append('<div class="grid-item" style="position:relative;"><h3 class="vid-title remove-div"><span style="color:#c8102e">' + dateTime + '</span>' + ' ' + video.title + ' ' + '</h3><a class="remove-div grid-click" data-videoid="/video/' + video.videoId + '"><div class="video-thumb" style="background-image:url(' + video.listImage.source + ')" ><img src="https://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/blazers/images/play-logo.png" class="play-logo" ></div></a></div>');
    }

  }

  function renderAllVideos(videos, clickedIndex) {
    $(".grid-item").remove();
    $("#video-title h2").remove();


    videos.forEach(renderVideo.bindParameter(2, clickedIndex));

    if (_nba && _nba.scout) {
      _nba.scout.call(document.getElementById('blazers-video-player'));
    } else {
      jQuery.getScript('https://www.nba.com/scout/team/cvp/videoPlayerScout.js', function() {
        if (_nba && _nba.scout) {
          _nba.scout.call(document.getElementById('blazers-video-player'));
        } else {
          console.log('Couldn\'t load CVP.');
        }
      });
    }

    jQuery('.grid-click').each(function(index) {
      jQuery(this).on('click', function() {
        renderAllVideos(videos, index);
        jQuery("#blazers-video-player").remove();
        jQuery(".nbaCvpWrapper").remove();
        var videoId = jQuery(this)[0].getAttribute('data-videoid');
        jQuery('#video-wrapper').html('<div id="blazers-video-player" class="remove-div" data-team="blazers" data-videoid="' + videoId + '" data-cvp-autostart="FALSE"></div>');
        _nba.scout.call(document.getElementById('blazers-video-player'));
        window.scrollTo(0, 500);
      })
    })
  }


  Function.prototype.bindParameter = function(idx, val) {
    var func = this;
    return function() {
      var arg = Array.prototype.slice.call(arguments);
      arg[idx] = val;
      func.apply(this, arg);
    }
  }

  function populatePage(object, callback) {

    jQuery(".remove-div").remove();

    // Check if any tabs are active
    var anyTabActive = $(".nav-item.active").length;
    if (anyTabActive === 0) {
      jQuery("#bioTab").addClass("active");
      jQuery("#bio-tab").parent().addClass("active");
    }
    // var object = players.filter(function(d) { return d.id === +optionValue; })[0];


    // On click make that tab acive
    $(".nav-tabs").find("a").click(function() {
      $(".nav-tabs").find("a").removeClass("active");
      $(this).addClass("active");
    });


    // Populate social media links
    if (object.instagram === 'N/A' && object.twitter === 'N/A') {
      jQuery("#social-section").css('display', 'none');
    } else {
      jQuery("#social-section").css('display', 'block');
      jQuery("#instagram").html('<i class="fa fa-2x fa-instagram" aria-hidden="true"></i>');
      jQuery("#instagram-handle").html('<p><a href="https://www.instagram.com/' + object.instagram + '"' + ' target="_blank">&nbsp;' + object.instagram + '</a></p>');
      jQuery("#twitter").html('<i class="fa fa-2x fa-twitter" aria-hidden="true"></i>');
      jQuery("#twitter-handle").html('<p><a href="https://www.twitter.com/' + object.instagram + '"' + ' target="_blank">&nbsp;' + object.twitter + '</a></p>');
    }



    // Populate highlights list
    var listArray = [];
    jQuery.each(object.highlights, function(i, val) {
      listArray.push("<li>" + val + "</li>");
    });
    jQuery("#highlights").html(listArray);


    // Make jerseys
    var team = [];
    var teamsArray = [];
    var yearsPlayed = [];
    jQuery.each(object.timeline, function(i, val) {
      team = (val.split(" "));
      teamsArray.push(team[0]);
      yearsPlayed.push(team[1]);
    });
    jQuery(".years").remove();
    jQuery.each(teamsArray, function(i, val) {
      if (teamsArray[i] == "ATL" || "BOS" || "BKN" || "CHA" || "CHI" || "CLE" || "DAL" || "DEN" || "DET" || "GSW" || "HOU" || "IND" || "LAC" || "LAL" || "MEM" || "MIA" || "MIL" || "MIN" || "NOP" || "NYK" || "OKC" || "ORL" || "PHI" || "PHO" || "POR" || "SAC" || "SAS" || "TOR" || "UTA" || "WAS") {
        var littleCase = teamsArray[i].toLowerCase();
        jQuery("#jersies").append('<div class="years"><img class="img-responsive" src="https://i.cdn.turner.com/drp/nba/blazers/sites/default/files/' + littleCase + '.png"><h4 class="years-played">' + yearsPlayed[i] + '</h4></div>');
      }
    });


    // Populate stats section
    populateStats(object);


    // QA dropdown
    qaString = object.qa;
    if (Object.keys(object).indexOf("qa") === -1) {
      $(".question").css("display", "none");
    } else {
      $(".question").css("display", "block");
      finalString = qaString.replace(/[?]+/gi, '?' + '<br>').replace(/[.]+/gi, '<br>');
      qaArray = finalString.split('<br>');
      jQuery("a#q1").html(qaArray[0]);
      jQuery("#a1").html(qaArray[1]);
      jQuery("a#q2").html(qaArray[2]);
      jQuery("#a2").html(qaArray[3]);
      jQuery("a#q3").html(qaArray[4]);
      jQuery("#a3").html(qaArray[5]);
      jQuery("a#q4").html(qaArray[6]);
      jQuery("#a4").html(qaArray[7]);
      jQuery("a#q5").html(qaArray[8]);
      jQuery("#a5").html(qaArray[9]);
      jQuery("a#q6").html(qaArray[10]);
      jQuery("#a6").html(qaArray[11]);
      jQuery("a#q7").html(qaArray[12]);
      jQuery("#a7").html(qaArray[13]);
      jQuery("a#q8").html(qaArray[14]);
      jQuery("#a8").html(qaArray[15]);
    }


    // Player info & position related stats
    jQuery.getJSON('https://data.nba.com/data/v2015/json/mobile_teams/nba/2017/players/playercard_' + object.id + '_02.json').done(function(data) {
      var year = data.pl.y;
      var val;
      if (data.pl.ca.sa.length <= year) {
        val = {
          "min": 0,
          "pts": 0,
          "fgp": 0,
          "tpp": 0,
          "ftp": 0,
          "ast": 0,
          "reb": 0,
          "blk": 0
        }
      } else {
        val = data.pl.ca.sa[year]
      }
      var fgp = Math.abs(val.fgp * 100).toFixed(1);
      var tpp = Math.abs(val.tpp * 100).toFixed(1);
      var ftp = Math.abs(val.ftp * 100).toFixed(1);
      if (data.pl.pos === 'G') {
        jQuery("h3.position").html("GUARD");
        jQuery("h3.min-guard").html(val.min);
        jQuery("h3.pts-guard").html(val.pts);
        jQuery("h3.fgp-guard").html(fgp + '%');
        jQuery("h3.tpp-guard").html(tpp + '%');
        jQuery("h3.ftp-guard").html(ftp + '%');
        jQuery("h3.ast-guard").html(val.ast);
        jQuery("h3.blk-guard").html(val.blk);
        jQuery("h3.reb-guard").html(val.reb);
      } else if (data.pl.pos === 'G-F') {
        jQuery("h3.position").html("FORWARD-GUARD");
        jQuery("h3.min-guard").html(val.min);
        jQuery("h3.pts-guard").html(val.pts);
        jQuery("h3.fgp-guard").html(fgp + '%');
        jQuery("h3.tpp-guard").html(tpp + '%');
        jQuery("h3.ftp-guard").html(ftp + '%');
        jQuery("h3.reb-guard").html(val.reb);
        jQuery("h3.blk-guard").html(val.blk);
        jQuery("h3.ast-guard").html(val.ast);
      } else if (data.pl.pos === 'C') {
        jQuery("h3.position").html("CENTER");
        jQuery("h3.min-guard").html(val.min);
        jQuery("h3.pts-guard").html(val.pts);
        jQuery("h3.fgp-guard").html(fgp + '%');
        jQuery("h3.ftp-guard").html(ftp + '%');
        jQuery("h3.blk-guard").html(val.blk);
        jQuery("h3.reb-guard").html(val.reb);
        jQuery("h3.tpp-guard").html(tpp + '%');
        jQuery("h3.ast-guard").hide(val.ast);
      } else if (data.pl.pos === 'C-F') {
        jQuery("h3.position").html("CENTER-FORWARD");
        jQuery("h3.min-guard").html(val.min);
        jQuery("h3.pts-guard").html(val.pts);
        jQuery("h3.fgp-guard").html(fgp + '%');
        jQuery("h3.ftp-guard").html(ftp + '%');
        jQuery("h3.blk-guard").html(val.blk);
        jQuery("h3.reb-guard").html(val.reb);
        jQuery("h3.tpp-guard").html(tpp + '%');
        jQuery("h3.ast-guard").html(val.ast);
      } else if (data.pl.pos === 'F-C') {
        jQuery("h3.position").html("FORWARD-CENTER");
        jQuery("h3.min-guard").html(val.min);
        jQuery("h3.pts-guard").html(val.pts);
        jQuery("h3.fgp-guard").html(fgp + '%');
        jQuery("h3.ftp-guard").html(ftp + '%');
        jQuery("h3.blk-guard").html(val.blk);
        jQuery("h3.reb-guard").html(val.reb);
        jQuery("h3.ast-guard").html(val.ast);
        jQuery("h3.tpp-guard").html(tpp + '%');
      } else if (data.pl.pos === 'F') {
        jQuery("h3.position").html("FORWARD");
        jQuery("h3.min-guard").html(val.min);
        jQuery("h3.pts-guard").html(val.pts);
        jQuery("h3.fgp-guard").html(fgp + '%');
        jQuery("h3.ftp-guard").html(ftp + '%');
        jQuery("h3.tpp-guard").html(tpp + '%');
        jQuery("h3.reb-guard").html(val.reb);
        jQuery("h3.blk-guard").html(val.blk)
        jQuery("h3.ast-guard").html(val.ast);
      } else if (data.pl.pos === 'F-G') {
        jQuery("h3.position").html("FORWARD-GUARD");
        jQuery("h3.min-guard").html(val.min);
        jQuery("h3.pts-guard").html(val.pts);
        jQuery("h3.fgp-guard").html(fgp + '%');
        jQuery("h3.ftp-guard").html(ftp + '%');
        jQuery("h3.tpp-guard").html(tpp + '%');
        jQuery("h3.reb-guard").html(val.reb);
        jQuery("h3.blk-guard").html(val.blk)
        jQuery("h3.ast-guard").html(val.ast);
      }

      // Player name
      jQuery("#player-name").html("<h2><span id='player-number'>" + data.pl.num + "</span>&nbsp;<span id='first-name'>   " + data.pl.fn + " <span> " + data.pl.ln + "</h2>");

      // Player DOB
      var dateArr = data.pl.dob.split("-");
      var birthdate = "";
      if (dateArr[1] === "01") {
        birthdate = "January " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "02") {
        birthdate = "February " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "03") {
        birthdate = "March " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "04") {
        birthdate = "April " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "05") {
        birthdate = "May " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "06") {
        birthdate = "June " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "07") {
        birthdate = "July " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "08") {
        birthdate = "August " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "09") {
        birthdate = "September " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "10") {
        birthdate = "October " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "11") {
        birthdate = "November " + dateArr[2] + ", " + dateArr[0];
      } else if (dateArr[1] === "12") {
        birthdate = "December " + dateArr[2] + ", " + dateArr[0];
      } else {
        birthdate = dateArr[1] + "/" + dateArr[2] + "/" + dateArr[0];
      }
      jQuery("h3#birthdate").html("BORN: " + birthdate);

      // Player College
      var collegeArr = data.pl.hcc.split("/");
      console.log(object.id);
      if (object.id === 1627834 || object.id === 203994) {
         jQuery("h3#college").html("FROM: " + collegeArr[0]);
      }
      else {
        jQuery("h3#college").html("COLLEGE: " + collegeArr[0]);
      }
      // Player Height Weight
      jQuery("h3#ht").html("HT: " + data.pl.ht + '"&nbsp;&nbsp;&nbsp;&nbsp; ' + "WT: " + data.pl.wt + 'lbs');

      //Get Player Head Shot
      playerHeadShot(object.id);

      //Action Image
      jQuery("img#action-image").attr('src', 'https://ak-static.cms.nba.com/wp-content/uploads/silos/nba/latest/440x700/' + object.id + '.png');

    }); //End Player Info Query

    //AJAX Fail Error
    var printError = function( req, status, err ) {
      console.log( 'something went wrong', status, err );
    };

    //Player Career Highs Success Function

    var renderPlayerHighs = function(data) {
      setTimeout(function() {
      if (data.pl.ca.pts.g.length !== 1) {
        var latestPts = data.pl.ca.pts.g.length - 1;
      } else {
        latestPts = 0;
      }

      if (data.pl.ca.reb.g.length !== 1) {
        var latestReb = data.pl.ca.reb.g.length - 1;
      } else {
        latestReb = 0;
      }

      if (data.pl.ca.ast.g.length !== 1) {
        var latestAst = data.pl.ca.ast.g.length - 1;
      } else {
        latestAst = 0;
      }
      console.log("gdte: " + data.pl.ca.reb.g[latestPts].gdte);

      var ptsDate = data.pl.ca.pts.g[latestPts].gdte;
      ptsDate = ptsDate.split('-');
      ptsDate = ptsDate[1] + '-' + ptsDate[2] + '-' + ptsDate[0];

      var reboundDate = data.pl.ca.reb.g[latestReb].gdte
      reboundDate = reboundDate.split('-');
      reboundDate = reboundDate[1] + '-' + reboundDate[2] + '-' + reboundDate[0];

      var astDate = data.pl.ca.ast.g[latestAst].gdte
      astDate = astDate.split('-');
      astDate = astDate[1] + '-' + astDate[2] + '-' + astDate[0];

      console.log('points: ' + ptsDate);
      console.log('rebounds: ' + reboundDate);
      console.log('ast: ' + astDate);

      jQuery("#highs").html('<div class="full-width"><div class="points">PTS:  <strong>' + data.pl.ca.pts.val + '</strong></div><div class="gray"> (vs ' + data.pl.ca.pts.g[latestPts].ota + ' on ' + ptsDate + ')</div><div class="rebounds">REB:  <strong>' + data.pl.ca.reb.val + '</strong></div><div class="gray"> (vs ' + data.pl.ca.reb.g[latestReb].ota + ' on ' + reboundDate + ')</div><div class="assists">AST:  <strong>' + data.pl.ca.ast.val + '</strong></div><div class="gray"> (vs ' + data.pl.ca.ast.g[latestAst].ota + ' on ' + astDate + ')</div></div>');
      }, 1000);
    }

    //New Query Player Career Highs
    jQuery.ajax({
      url: 'https://data.nba.com/data/v2015/json/mobile_teams/nba/2017/players/player_highs_' + object.id + '_02.json',
      type: "GET",
      dataType: "json",
      success: renderPlayerHighs,
      error: printError

    });

    //RENDER ARTICLES
    var newsUrl = 'https://api.nba.net/2/blazers/article/?players=' + object.id + '|title=' + object.name + '|headline=' + object.name + '|subheadline=' + object.name + '|description=' + object.name + '&count=8';
    $.ajax({
      url: newsUrl,
      type: "GET",
      dataType: "json",
      headers: { "AccessToken": "internal|bb88df6b4c2244e78822812cecf1ee1b" },
      success: function(data) {
        var articles = data.response.result
        for (var i = 0; i < articles.length; i++) {
          if (Object.keys(articles[i]).indexOf("listImage") !== -1) {
            var article = '<div class="col-xs-12 col-sm-6 remove-div"><a href="' + articles[i].url + '" target="_blank"><div style="background-image: url(' + articles[i].listImage.thumbnail + ')" class="background-thumbnail"><h3>' + articles[i].title + '</h3></div></a></div>';
            jQuery("#render-news").append(article);
          }
        }
      },
    });

    //LOAD MORE ARTICLES
    var newsCount = 8;
    jQuery("#load-more-news").click(function() {
      newsCount += 4;
      $.ajax({
        url: 'https://api.nba.net/2/blazers/article/?players=' + object.id + '|title=' + object.name + '|headline=' + object.name + '|subheadline=' + object.name + '|description=' + object.name + '&offset=' + newsCount + '&count=4',
        type: "GET",
        dataType: "json",
        headers: { "AccessToken": "internal|bb88df6b4c2244e78822812cecf1ee1b" },
        success: function(data) {
          var articles = data.response.result
          for (var i = 0; i < articles.length; i++) {
            if (Object.keys(articles[i]).indexOf("listImage") !== -1) {
              var article = '<div class="col-xs-12 col-sm-6 remove-div"><a href="' + articles[i].url + '" target="_blank"><div style="background-image: url(' + articles[i].listImage.thumbnail + ')" class="background-thumbnail"><h3>' + articles[i].title + '</h3></div></a></div>';
              jQuery("#render-news").append(article);
            }
          }

        },
      });
    })

    //RENDER VIDEOS
    $.ajax({
      url: 'https://api.nba.net/2/blazers/video,imported_video/?count=8&players=' + object.id + '',
      type: "GET",
      dataType: "json",
      headers: { "AccessToken": "internal|bb88df6b4c2244e78822812cecf1ee1b" },
      success: function(data) {

        // Get videos from result
        var videos = data.response.result

        // Render Videos
        renderAllVideos(videos, 0);
      },
    });

    //LOAD MORE VIDEOS
    var videoCount = 8;
    jQuery("#load-more").click(function() {
      videoCount += 4;
      $.ajax({
        url: 'https://api.nba.net/2/blazers/video,imported_video/?count=' + videoCount + '&players=' + object.id + '',
        type: "GET",
        dataType: "json",
        headers: { "AccessToken": "internal|bb88df6b4c2244e78822812cecf1ee1b" },
        success: function(data) {
          jQuery(".nbaCvpPlayer").remove()
          jQuery("#video-playing").empty()
          // Get videos from result
          var videos = data.response.result

          // Render Videos
          renderAllVideos(videos, 0);


        },
      });
    })


    // RENDER PHOTOS
    $.ajax({
      url: 'https://api.nba.net/2/blazers/gallery/?players=' + object.id + '&count=8',
      type: "GET",
      dataType: "json",
      headers: { "AccessToken": "internal|bb88df6b4c2244e78822812cecf1ee1b" },
      success: function(data) {
        var photos = data.response.result
        for (var i = 0; i < photos.length; i++) {
          var photo = '<div class="col-xs-12 col-sm-6 remove-div"><a href="' + photos[i].url + '" target="_blank"><div style="background-image: url(' + photos[i].media[1].source + ')" class="background-thumbnail-photo"><h3>' + photos[i].headline + '</h3></div></a></div>';
          jQuery("#photoContainer").append(photo);

        }
      },
    });

    //LOAD MORE PHOTOS
    var photoCount = 8;
    jQuery("#load-more-photos").click(function() {
      photoCount += 4;
      $.ajax({
        url: 'https://api.nba.net/2/blazers/gallery/?players=' + object.id + '&offset=' + photoCount + '&count=4',
        type: "GET",
        dataType: "json",
        headers: { "AccessToken": "internal|bb88df6b4c2244e78822812cecf1ee1b" },
        success: function(data) {

          var photos = data.response.result
          for (var i = 0; i < photos.length; i++) {
            var photo = '<div class="col-xs-12 col-sm-6 remove-div"><a href="' + photos[i].url + '" target="_blank"><div style="background-image: url(' + photos[i].media[1].source + ')" class="background-thumbnail-photo"><h3>' + photos[i].headline + '</h3></div></a></div>';
            jQuery("#photoContainer").append(photo);

          }
        },
      });
    })
    callback()
  }

  function loadData(optionValue, players) {
    if (optionValue) {
      var object = filterPlayers(optionValue, players)
      populatePage(object, loadLargeThumbnail);
    }
  }

  $("#player-select").change(function() {
    $(this).find("option:selected").each(function() {
      jQuery(".nbaCvpPlayer").remove()
      jQuery("#video-playing").empty()
      var optionValue = $(this).attr("value");
      if (optionValue !== undefined) {
        window.history.pushState(null, null, 'bios?pid=' + optionValue);
      }
      loadData(optionValue, players, loadLargeThumbnail);
    });
  }).change();

  $("#stats-select").change(function() {
    var optionValue = $("#player-select").val();
    if (!isNaN(+optionValue)) {
      var object = filterPlayers(optionValue, players);
      // console.log("checkpoint 2")
      // console.log(optionValue)
      // console.log(object);
      populateStats(object);
    }
  }).change();

  jQuery('table.roster tr').click(function() {
    jQuery(".nbaCvpPlayer").remove()
    jQuery("#video-playing").empty()
    var playerId = $(this).attr('data-pid');
    if (playerId !== undefined) {
      window.history.pushState(null, null, 'bios?pid=' + playerId);
    }

    $("#player-select").val(playerId);
    loadData(playerId, players);

    var selected = $(this).hasClass("highlight");
    $('table.roster tr').removeClass("highlight");
    if (!selected)
      $(this).addClass("highlight");
  });

  function loadLargeThumbnail() {
    setTimeout(function() {
      var thumbnailURL = jQuery('.nbaCvpPlayer video').attr('poster');
      console.log('thumbnail: ' + thumbnailURL);
      if (thumbnailURL.indexOf('70x53.jpg') !== -1) {
        var newThumbnailURL = thumbnailURL.replace('70x53.jpg', '640x360.jpg');
        jQuery('.nbaCvpPlayer video').attr('poster', newThumbnailURL);
      }
    }, 3000);
  }

});